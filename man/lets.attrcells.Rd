% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/lets_attrcells.R
\name{lets.attrcells}
\alias{lets.attrcells}
\title{Descriptors of centrality, border proximity, and isolation in attribute space}
\usage{
lets.attrcells(x, perc = 0.2, remove.cells = FALSE)
}
\arguments{
\item{x}{A list produced by \code{\link{lets.attrpam}} containing:
\itemize{
  \item \code{$PAM_attribute}: data.frame with columns \code{Cell_attr} (first),
        the two attribute coordinates (second and third), followed by taxa columns (0/1).
  \item \code{$Attr_Richness_Raster}: \link[terra]{SpatRaster} with richness per attribute cell.
}}

\item{perc}{Numeric in (0, 1]; fraction used in the robust border metric
(mean of the \emph{n} smallest zero-richness distances). Default \code{0.2}.}

\item{remove.cells}{Logical. If 'TRUE', remove empty cells from the results.}
}
\value{
A \code{data.frame} with one row per attribute cell and the columns:
\itemize{
  \item \code{Cell_attr}: attribute cell identifier (1..n).
  \item \code{Richness}: taxa count for the cell (from \code{$Attr_Richness_Raster}).
  \item \code{Weighted Mean Distance to midpoint}, \code{Mean Distance to midpoint}:
        negated distances (larger = more central) in standardized attribute space.
  \item \code{Minimum Zero Distance}, \code{Minimum 10\% Zero Distance},
        \code{Distance to MCP border}: border proximity proxies.
  \item \code{Frequency Weighted Distance}: richness-weighted mean distance to all other cells.
}
}
\description{
Computes per-cell descriptors for an attribute-space presence–absence matrix
(as returned by \code{\link{lets.attrpam}}), using the two numeric attributes
as a 2D coordinate system. The descriptors include:
\itemize{
  \item \strong{Richness}: number of taxa in each attribute cell (from the richness raster).
  \item \strong{Distances to attribute midpoints}: distance to the weighted midpoint
        (weights = richness) and to the unweighted midpoint, both computed in standardized
        attribute space; returned as \emph{negated} values so that larger numbers indicate
        greater centrality.
  \item \strong{Border proximity}: three proxies — minimum distance to any zero-richness cell;
        robust mean of the closest \code{perc} fraction of zero-richness distances; and
        minimum distance to the convex-hull (MCP) border of occupied attribute cells.
  \item \strong{Attribute isolation}: richness-weighted mean distance from each cell
        to all other cells in standardized attribute space.
}
}
\details{
Attribute-cell descriptors for an attribute-space PAM (AttrPAM)


Attributes (columns 2–3 of \code{$PAM_attribute}) are standardized (z-scores)
prior to distance calculations. Cells with \code{NA} richness are treated as zero
when identifying zero-richness neighbors, and later masked in plotting.
}
\examples{
\dontrun{
# Example with simulated traits
n <- 2000
Species <- paste0("sp", 1:n)
trait_a <- rnorm(n)
trait_b <- trait_a * 0.2 + rnorm(n)  # correlated trait
df <- data.frame(Species, trait_a, trait_b)

# Build AttrPAM
x <- lets.attrpam(df, n_bins = 30)

# Compute descriptors
y <- lets.attrcells(x)

# Plot descriptors
lets.plot.attrcells(x, y)
}

}
