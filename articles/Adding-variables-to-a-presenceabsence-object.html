<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Adding variables to a PresenceAbsence object • letsR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adding variables to a PresenceAbsence object">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">letsR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/A-guide-to-transform-species-distributions-into-a-presence-absence-matrix-based.html">A guide to transform species distributions into a presence absence matrix based on a user-defined grid in R</a></li>
    <li><a class="dropdown-item" href="../articles/Adding-variables-to-a-presenceabsence-object.html">Adding variables to a PresenceAbsence object</a></li>
    <li><a class="dropdown-item" href="../articles/cropping-and-subseting-your-presence-absence-matrix.html">Cropping and subseting your presence absence matrix</a></li>
    <li><a class="dropdown-item" href="../articles/mapping-species-traits.html">Mapping species traits: community level analysis</a></li>
    <li><a class="dropdown-item" href="../articles/save-load-presenceabsence.html">How to save and load a PresenceAbsence object</a></li>
    <li><a class="dropdown-item" href="../articles/species-level-macroecological-analysis.html">Macroecological analysis at the species level</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/macroecology/letsR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="Adding-variables-to-a-presenceabsence-object_files/kePrint-0.0.1/kePrint.js"></script><link href="Adding-variables-to-a-presenceabsence-object_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Adding variables to a PresenceAbsence object</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/macroecology/letsR/blob/master/vignettes/Adding-variables-to-a-presenceabsence-object.Rmd" class="external-link"><code>vignettes/Adding-variables-to-a-presenceabsence-object.Rmd</code></a></small>
      <div class="d-none name"><code>Adding-variables-to-a-presenceabsence-object.Rmd</code></div>
    </div>

    
    
<p>Once you have transformed species distribution data into a presence
absence matrix (PAM) in <code>PresenceAbsence</code> format, you may
wish to enhance it by incorporating additional variables. These
variables typically exist in raster format, such as WorldClim
bioclimatic data, or in shapefile format, for instance, global
ecoregions.</p>
<div class="section level3">
<h3 id="adding-variables-in-raster-format">Adding variables in raster format<a class="anchor" aria-label="anchor" href="#adding-variables-in-raster-format"></a>
</h3>
<p>To add variables in raster format to a <code>PresenceAbsence</code>
object we can use the function <code>lets.addvar</code> from the
<code>letsR</code> package. This function takes a <code>raster</code>
object with any resolution and extent, and transform it to match the
information in your <code>PresenceAbsence</code> object. Subsequently,
the variables are included as additional columns containing the
aggregate/summarize value of the variable(s) in each cell of the
presence-absence matrix. Let’s see an example using the bioclimatic data
from WorldClim.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.12401" class="external-link">letsR</a></span><span class="op">)</span></span></code></pre></div>
<p>Here we will use the Average temperature raster in Celsius degrees
(multiplied by 100) for the world in 10 arc min of resolution.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/wrap.html" class="external-link">unwrap</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="co"># example data</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span></code></pre></div>
<p><img src="Adding-variables-to-a-presenceabsence-object_files/figure-html/unnamed-chunk-3-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Here I will use the <code>PresenceAbsence</code> object for
Phyllomedusa species previously generated.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">PAM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">PAM</span>, main <span class="op">=</span> <span class="st">"Phyllomedusa\nRichness"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Adding-variables-to-a-presenceabsence-object_files/figure-html/unnamed-chunk-4-1.png" width="384" style="display: block; margin: auto;"></p>
<p>We can now run the <code>lets.addvar</code> function. Just make sure
that the two objects are on the same projection before using the
function. Also, note that the climatic data have a higher resolution
than our PAM. In this case, we could choose a function to aggregate the
values with the argument <code>fun</code>. In most of the situations,
people will be interested in averaging values to aggregate multiple
cells, but in some specific cases you may want to sum them, or get the
standard deviation, or use any another function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PAM_env</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lets.addvar.html">lets.addvar</a></span><span class="op">(</span><span class="va">PAM</span>, <span class="va">r</span>, fun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in lets.addvar(PAM, r, fun = mean): Reprojecting y to match the</span></span>
<span><span class="co">#&gt; projection in x</span></span></code></pre></div>
<p>The result is a presence absence matrix, where the last columns now
include the raster values. Check the table:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">PAM_env</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:800px; ">
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Longitude(x)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Latitude(y)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa araguari
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa atelopoides
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa ayeaye
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa azurea
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa bahiana
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa baltea
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa bicolor
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa boliviana
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa burmeisteri
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa camba
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa centralis
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa coelestis
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa distincta
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa duellmani
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa ecuatoriana
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa hypochondrialis
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa iheringii
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa itacolomi
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa megacephala
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa neildi
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa nordestina
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa oreades
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa palliata
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa perinesos
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa rohdei
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa sauvagii
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa tarsius
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa tetraploidea
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa tomopterna
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa trinitatis
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa vaillantii
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa venusta
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
wc2.1_10m_bio_1_mean
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
-74.5
</td>
<td style="text-align:right;">
11.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
26.67511
</td>
</tr>
<tr>
<td style="text-align:right;">
-69.5
</td>
<td style="text-align:right;">
11.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
26.38072
</td>
</tr>
<tr>
<td style="text-align:right;">
-68.5
</td>
<td style="text-align:right;">
11.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
26.75012
</td>
</tr>
<tr>
<td style="text-align:right;">
-75.5
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
27.59441
</td>
</tr>
<tr>
<td style="text-align:right;">
-74.5
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
27.69106
</td>
</tr>
<tr>
<td style="text-align:right;">
-69.5
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
24.01917
</td>
</tr>
</tbody>
</table>
</div>
<p>If you do not want the coordinates and species included you can set
the argument <code>onlyvar = TRUE</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">climate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lets.addvar.html">lets.addvar</a></span><span class="op">(</span><span class="va">PAM</span>, <span class="va">r</span>, fun <span class="op">=</span> <span class="va">mean</span>, onlyvar <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in lets.addvar(PAM, r, fun = mean, onlyvar = TRUE): Reprojecting y to</span></span>
<span><span class="co">#&gt; match the projection in x</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">climate</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
wc2.1_10m_bio_1_mean
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
26.67511
</td>
</tr>
<tr>
<td style="text-align:right;">
26.38072
</td>
</tr>
<tr>
<td style="text-align:right;">
26.75012
</td>
</tr>
<tr>
<td style="text-align:right;">
27.59441
</td>
</tr>
<tr>
<td style="text-align:right;">
27.69106
</td>
</tr>
<tr>
<td style="text-align:right;">
24.01917
</td>
</tr>
</tbody>
</table>
<p>Now that we have the variables, we can use it to relate to our
species data in many ways. For example, you could graph the relationship
between temperature and species richness.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rich</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rowSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">PAM</span><span class="op">$</span><span class="va">P</span><span class="op">[</span>, <span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mpg1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"Temperature"</span> <span class="op">=</span> <span class="va">climate</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">/</span><span class="fl">10</span>,</span>
<span>                   <span class="st">"Richness"</span> <span class="op">=</span> <span class="va">rich</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg1</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">Temperature</span>, <span class="va">Richness</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">.6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Adding-variables-to-a-presenceabsence-object_files/figure-html/unnamed-chunk-13-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="adding-variables-in-polygon-format">Adding variables in polygon format<a class="anchor" aria-label="anchor" href="#adding-variables-in-polygon-format"></a>
</h3>
<p>Data in shapefile format like ecorregions, conservation units or
countries, can be added to a PAM using the function
<code>lets.addpoly</code>. This function adds polygons’ attributes as
columns at the right-end of the matrix. The values represent the
percentage of the cell covered by the polygon attribute used. As an
example, we can use the South America countries map available in the
package <code>maptools</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"wrld_simpl"</span><span class="op">)</span></span>
<span><span class="va">SA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brazil"</span>, <span class="st">"Colombia"</span>,  <span class="st">"Argentina"</span>,</span>
<span>        <span class="st">"Peru"</span>, <span class="st">"Venezuela"</span>, <span class="st">"Chile"</span>,</span>
<span>        <span class="st">"Ecuador"</span>, <span class="st">"Bolivia"</span>, <span class="st">"Paraguay"</span>,</span>
<span>        <span class="st">"Uruguay"</span>, <span class="st">"Guyana"</span>, <span class="st">"Suriname"</span>,</span>
<span>        <span class="st">"French Guiana"</span><span class="op">)</span></span>
<span><span class="va">south_ame</span> <span class="op">&lt;-</span> <span class="va">wrld_simpl</span><span class="op">[</span><span class="va">wrld_simpl</span><span class="op">$</span><span class="va">NAME</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="va">SA</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">south_ame</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">ISO3</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Adding-variables-to-a-presenceabsence-object_files/figure-html/unnamed-chunk-14-1.png" width="384" style="display: block; margin: auto;"></p>
<p>Now we can add this variables to our PAM.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PAM_pol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lets.addpoly.html">lets.addpoly</a></span><span class="op">(</span><span class="va">PAM</span>, <span class="va">south_ame</span>, <span class="st">"NAME"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">PAM_pol</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:800px; ">
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Longitude(x)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Latitude(y)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa araguari
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa atelopoides
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa ayeaye
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa azurea
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa bahiana
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa baltea
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa bicolor
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa boliviana
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa burmeisteri
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa camba
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa centralis
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa coelestis
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa distincta
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa duellmani
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa ecuatoriana
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa hypochondrialis
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa iheringii
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa itacolomi
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa megacephala
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa neildi
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa nordestina
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa oreades
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa palliata
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa perinesos
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa rohdei
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa sauvagii
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa tarsius
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa tetraploidea
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa tomopterna
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa trinitatis
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa vaillantii
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Phyllomedusa venusta
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Argentina
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Bolivia
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Brazil
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Chile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Colombia
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Ecuador
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
French Guiana
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Guyana
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Suriname
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Paraguay
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Peru
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Uruguay
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Venezuela
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
-74.5
</td>
<td style="text-align:right;">
11.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1231
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0000
</td>
</tr>
<tr>
<td style="text-align:right;">
-69.5
</td>
<td style="text-align:right;">
11.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.5744
</td>
</tr>
<tr>
<td style="text-align:right;">
-68.5
</td>
<td style="text-align:right;">
11.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1744
</td>
</tr>
<tr>
<td style="text-align:right;">
-75.5
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.3333
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0000
</td>
</tr>
<tr>
<td style="text-align:right;">
-74.5
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.9641
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0000
</td>
</tr>
<tr>
<td style="text-align:right;">
-69.5
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.0000
</td>
</tr>
</tbody>
</table>
</div>
<p>This information can be used to calculate the number of species per
country for example.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vars_col</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">PAM</span><span class="op">$</span><span class="va">P</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">PAM_pol</span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">vars_col</span><span class="op">)</span></span>
<span><span class="va">rich_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">rich_count</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rowSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">PAM</span><span class="op">$</span><span class="va">P</span><span class="op">[</span><span class="va">PAM_pol</span><span class="op">[</span>, <span class="va">vars_col</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">0</span>,</span>
<span>                                     <span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">labs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/is.bool.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">PAM_pol</span><span class="op">)</span><span class="op">[</span><span class="va">vars_col</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">rich_count</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">labs</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mpg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"Richness"</span> <span class="op">=</span> <span class="va">rich_count</span>, <span class="st">"Country"</span> <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/is.bool.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">labs</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">labs</span>, <span class="va">Richness</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Adding-variables-to-a-presenceabsence-object_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;"></p>
<p><strong>To cite letsR in publications use:</strong> <em>Bruno Vilela
and Fabricio Villalobos (2015). letsR: a new R package for data handling
and analysis in macroecology. Methods in Ecology and Evolution. DOI:
10.1111/2041-210X.12401</em></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bruno Vilela, Fabricio Villalobos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
